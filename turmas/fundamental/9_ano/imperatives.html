<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Mist√©rio da Mans√£o Escondida</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* (Seu CSS permanece o mesmo) */
        body { font-family: 'Roboto', sans-serif; background-color: #1a1a1a; color: #f0f0f0; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 30px; box-sizing: border-box; font-size: 1.25rem; }
        .botao-voltar { display: inline-block; margin-bottom: 25px; padding: 10px 20px; background-color: #4a4a4a; color: #f0f0f0; text-decoration: none; border-radius: 8px; font-weight: bold; transition: background-color 0.3s, color 0.3s; }
        .botao-voltar:hover { background-color: #ffc107; color: #1a1a1a; }
        #start-screen { display: flex; flex-direction: column; align-items: center; text-align: center; background-color: #2b2b2b; border: 2px solid #555; border-radius: 15px; box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); width: 90%; max-width: 900px; padding: 40px; }
        #start-screen img { max-width: 300px; border-radius: 10px; margin-bottom: 20px; }
        #start-screen h1 { font-family: 'Creepster', cursive; font-size: 4.5rem; color: #ffc107; margin: 10px 0; }
        #start-screen p { font-size: 1.3rem; margin: 20px 0 30px 0; max-width: 600px; }
        #start-button { background-color: #ffc107; color: #1a1a1a; border: none; border-radius: 10px; padding: 20px 40px; font-size: 1.5rem; font-weight: bold; cursor: pointer; transition: transform 0.2s, background-color 0.2s; }
        #start-button:hover { transform: scale(1.05); background-color: #ffda73; }
        #story-container { display: none; background-color: #2b2b2b; border: 2px solid #555; border-radius: 15px; box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); width: 90%; max-width: 1200px; padding: 40px; text-align: center; transition: opacity 0.5s ease-in-out; flex-direction: column; justify-content: space-between; min-height: 70vh; }
        #scene-title { font-family: 'Creepster', cursive; font-size: 4rem; color: #ffc107; margin-bottom: 20px; letter-spacing: 2px; }
        #scene-image { max-width: 90%; max-height: 40vh; object-fit: contain; border-radius: 10px; border: 3px solid #444; margin: 0 auto 30px auto; display: block; }
        #scene-text { font-size: 1.3rem; line-height: 1.7; margin-bottom: 40px; text-align: left; }
        #options-container { display: flex; flex-direction: column; gap: 15px; margin-bottom: 30px; }
        .option-button { background-color: #4a4a4a; color: #f0f0f0; border: 2px solid #666; border-radius: 8px; padding: 18px; font-size: 1.2rem; font-weight: bold; cursor: pointer; text-align: left; transition: background-color 0.3s, transform 0.2s, opacity 0.3s; }
        .option-button:hover { background-color: #ffc107; color: #1a1a1a; transform: scale(1.02); }
        .wrong-option { background-color: #782020; opacity: 0.6; pointer-events: none; text-decoration: line-through; }
        .disabled-option { pointer-events: none; opacity: 0.5; }
        #feedback-container { margin-top: 20px; min-height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #feedback-text { font-weight: bold; font-size: 1.3rem; color: #28a745; min-height: 30px; margin-bottom: 20px; }
        .continue-button { background-color: #ffc107; color: #1a1a1a; border: none; border-radius: 8px; padding: 15px 30px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: background-color 0.3s, transform 0.2s; }
        .continue-button:hover { background-color: #ffda73; transform: scale(1.05); }
        #inventory-container { margin-top: 30px; padding-top: 20px; border-top: 2px solid #444; text-align: left; }
        #inventory-container h3 { font-family: 'Creepster', cursive; font-size: 2.2rem; color: #f0f0f0; margin: 0 0 15px 0; letter-spacing: 1px; }
        #inventory-list { list-style-type: none; padding: 0; font-size: 1.2rem; color: #ffc107; display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
        #inventory-list li { background-color: #333; padding: 8px 15px; border-radius: 5px; }
        #completion-screen { display: none; text-align: center; }
        #treasure-image { max-width: 300px; margin-bottom: 20px; }
        #completion-screen h1 { font-family: 'Creepster', cursive; font-size: 5rem; color: #28a745; margin-bottom: 20px; }
        #completion-screen p { font-size: 1.5rem; line-height: 1.8; }
        #restart-button { background-color: #ffc107; color: #1a1a1a; border: none; border-radius: 8px; padding: 18px 35px; font-size: 1.3rem; font-weight: bold; cursor: pointer; margin-top: 30px; transition: background-color 0.3s; }
        #restart-button:hover { background-color: #ffda73; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); display: none; justify-content: center; align-items: center; z-index: 1000; animation: fadeIn 0.3s ease; }
        .modal-content { background-color: #3e2723; padding: 40px; border-radius: 10px; border: 3px solid #ffc107; text-align: center; max-width: 500px; box-shadow: 0 0 25px rgba(255, 193, 7, 0.5); }
        #modal-text { font-size: 1.4rem; margin: 0 0 30px 0; line-height: 1.6; }
        #close-modal-btn { background-color: #ffc107; color: #1a1a1a; border: none; border-radius: 8px; padding: 15px 30px; font-size: 1.2rem; font-weight: bold; cursor: pointer; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <a href="index.html" class="botao-voltar">&larr; Voltar para a lista de aulas</a>

    <div id="start-screen">
        <img src="../../../imagens/aventura/porta_mansao.png" alt="A Misteriosa Mans√£o Blackwood">
        <h1>O Mist√©rio da Mans√£o Escondida</h1>
        <p>Uma casa abandonada. Um mapa esquecido. Voc√™ tem coragem para descobrir o segredo?</p>
        <button id="start-button">Iniciar Aventura</button>
    </div>

    <div id="story-container">
        <div id="adventure-screen">
            <h2 id="scene-title"></h2>
            <img id="scene-image" src="" alt="Cena do Mist√©rio">
            <p id="scene-text"></p>
            <div id="options-container"></div>
            <div id="feedback-container"><p id="feedback-text"></p></div>
            <div id="inventory-container">
                <h3>Inventory:</h3>
                <ul id="inventory-list"></ul>
            </div>
        </div>
        <div id="completion-screen">
            <img id="treasure-image" src="../../../imagens/aventura/segredo_final.png" alt="Ba√∫ do Tesouro Aberto">
            <h1>Congratulations!</h1>
            <p>You found the real treasure: a great story! You are a fantastic adventurer!</p>
            <p>Voc√™ encontrou o verdadeiro tesouro: uma grande hist√≥ria! Voc√™ √© um aventureiro fant√°stico!</p>
            <button id="restart-button">Play Again (Jogar Novamente)</button>
        </div>
    </div>

    <audio id="som-erro" src="../../../audio/som_erro.mp3"></audio> 
    <audio id="musica-fundo" src="../../../audio/musica_misterio.mp3" loop></audio>

    <div id="wrong-answer-modal" class="modal-overlay">
        <div class="modal-content">
            <p id="modal-text"></p>
            <button id="close-modal-btn">Try Again</button>
        </div>
    </div>

    <script>
        // JAVASCRIPT COM CAMINHOS CORRIGIDOS
        const story = [
            { title: 'The Forgotten Map', image: '../../../imagens/aventura/mapa_esquecido.png', text: "...", options: [ { text: 'a) Go to the kitchen and eat a snack.', correct: false, wrongFeedback: "An adventure can wait, but your stomach can't? Maybe... but the map seems more urgent right now." }, { text: 'b) Follow the map to the abandoned house.', correct: true }, { text: 'c) Call your friends and tell them about the map.', correct: false, wrongFeedback: "You try to call, but there's no signal near the spooky manor. The adventure is for you alone!" } ] },
            { title: 'The Front Door', image: '../../../imagens/aventura/porta_mansao.png', text: "...", options: [ { text: 'a) Shout "Open the door!"', correct: false, wrongFeedback: "You shout, but only a distant owl hoots back. The door remains stubbornly shut." }, { text: 'b) Look under the doormat.', correct: false, wrongFeedback: "You find some dust and a startled spider... but wait, what's that shining? You found an Old Coin!", itemGained: 'Moeda Antiga ü™ô' }, { text: 'c) Pull the loose brick from the wall.', correct: true, feedback: 'You pull the brick and find a rusty key inside a small hole!', itemGained: 'Rusty Key üóùÔ∏è' } ] },
            { title: 'The Dark Hallway', image: '../../../imagens/aventura/corredor_escuro.png', text: "...", options: [ { text: 'a) Run out of the house.', correct: false, wrongFeedback: "You're an adventurer, not a scaredy-cat! Get back in there and find a light." }, { text: 'b) Open the heavy chest.', correct: false, wrongFeedback: "It's locked tight and seems too heavy to force open. There must be another way to get some light." }, { text: 'c) Pull the rope.', correct: true, feedback: 'You pull the rope, and an old chandelier flickers to life, illuminating the hallway!' } ] },
            { title: 'The Riddle Room', image: '../../../imagens/aventura/biblioteca_enigma.png', text: "...", options: [ { text: 'a) Look for a book about animals.', correct: false, wrongFeedback: "A book about lions and tigers won't help you with a riddle about water with no fish." }, { text: 'b) Find a world map on the wall.', correct: true, feedback: 'Correct! The answer is "A Map". You found it!', itemGained: 'A Map üó∫Ô∏è'}, { text: 'c) Check the fireplace for clues.', correct: false, wrongFeedback: "It's cold and full of old ashes. The answer isn't here." } ] },
            { title: 'The Dusty Map', image: '../../../imagens/aventura/mapa_empoeirado.png', text: "...", options: [ { text: 'a) WIPE the map gently.', correct: true, feedback: 'Perfect! You wipe away the dust and see a small, hidden button behind the map.' }, { text: 'b) WASH the map with water.', correct: false, wrongFeedback: 'Oh no! The ancient ink starts to run. You stop just in time. Washing it would destroy the map.' }, { text: 'c) BREAK the map off the wall.', correct: false, wrongFeedback: 'That would be too aggressive and might break whatever is behind it. A gentle approach is better.' } ] },
            { title: 'The Final Secret', image: '../../../imagens/aventura/botao_parede.png', text: "...", options: [ { text: 'a) Press the button.', correct: true, feedback: 'CLICK! You hear a grinding sound as the bookshelf slides to the side...' }, { text: 'b) Read another book.', correct: false, wrongFeedback: "You've already solved the riddle. The books are a distraction now. Focus on the button!" }, { text: 'c) Leave the library.', correct: false, wrongFeedback: "You're so close to the end! Don't give up now." } ] }
        ];

        // O resto do seu JavaScript permanece o mesmo, pois a l√≥gica de funcionamento n√£o muda.
        const startScreen = document.getElementById('start-screen'); const startButton = document.getElementById('start-button'); const storyContainer = document.getElementById('story-container'); const adventureScreen = document.getElementById('adventure-screen'); const completionScreen = document.getElementById('completion-screen'); const sceneTitle = document.getElementById('scene-title'); const sceneImage = document.getElementById('scene-image'); const sceneText = document.getElementById('scene-text'); const optionsContainer = document.getElementById('options-container'); const restartButton = document.getElementById('restart-button'); const inventoryList = document.getElementById('inventory-list'); const somErro = document.getElementById('som-erro'); const feedbackContainer = document.getElementById('feedback-container'); const wrongAnswerModal = document.getElementById('wrong-answer-modal'); const modalText = document.getElementById('modal-text'); const closeModalBtn = document.getElementById('close-modal-btn'); const musicaFundo = document.getElementById('musica-fundo');
        let currentSceneIndex = 0; let inventory = [];
        startButton.onclick = () => { startScreen.style.display = 'none'; document.querySelector('.botao-voltar').style.display = 'inline-block'; storyContainer.style.display = 'flex'; musicaFundo.volume = 0.3; musicaFundo.play(); story.forEach((scene, index) => { const fullText = getFullTextForScene(index); if (fullText) scene.text = fullText; }); displayScene(); };
        document.addEventListener('DOMContentLoaded', () => { if(document.querySelector('.botao-voltar')) { document.querySelector('.botao-voltar').style.display = 'none'; } if (startScreen) { startScreen.style.display = 'flex'; } if (storyContainer && startScreen) { storyContainer.style.display = 'none'; } });
        function displayScene() { document.getElementById('feedback-container').innerHTML = '<p id="feedback-text"></p>'; const currentScene = story[currentSceneIndex]; sceneTitle.textContent = currentScene.title; sceneImage.src = currentScene.image; sceneText.textContent = currentScene.text; optionsContainer.innerHTML = ''; currentScene.options.forEach(option => { const button = document.createElement('button'); button.textContent = option.text; button.className = 'option-button'; button.onclick = () => handleOptionClick(option, button); optionsContainer.appendChild(button); }); updateInventoryDisplay(); }
        function handleOptionClick(option, buttonElement) { if (option.itemGained && !inventory.includes(option.itemGained)) { inventory.push(option.itemGained); updateInventoryDisplay(); } if (option.correct) { const feedbackP = document.getElementById('feedback-text'); feedbackP.textContent = option.feedback || 'Good choice!'; Array.from(optionsContainer.children).forEach(btn => { btn.classList.add('disabled-option'); }); const continueBtn = document.createElement('button'); continueBtn.textContent = 'Continue ‚Üí'; continueBtn.className = 'continue-button'; continueBtn.onclick = advanceToNextScene; feedbackP.parentElement.appendChild(continueBtn); } else { somErro.play(); buttonElement.classList.add('wrong-option'); modalText.textContent = option.wrongFeedback || "That doesn't seem right. Try again!"; wrongAnswerModal.style.display = 'flex'; } }
        function advanceToNextScene() { storyContainer.style.opacity = 0; setTimeout(() => { currentSceneIndex++; if (currentSceneIndex < story.length) { displayScene(); storyContainer.style.opacity = 1; } else { showCompletionScreen(); } }, 500); }
        function updateInventoryDisplay() { inventoryList.innerHTML = ''; if (inventory.length === 0) { const li = document.createElement('li'); li.textContent = "Empty"; li.style.color = "#888"; inventoryList.appendChild(li); } else { inventory.forEach(item => { const li = document.createElement('li'); li.textContent = item; inventoryList.appendChild(li); }); } }
        function showCompletionScreen() { adventureScreen.style.display = 'none'; completionScreen.style.display = 'block'; document.querySelector('.botao-voltar').style.display = 'inline-block'; storyContainer.style.opacity = 1; }
        function restartAdventure() { completionScreen.style.display = 'none'; startScreen.style.display = 'flex'; storyContainer.style.display = 'none'; document.querySelector('.botao-voltar').style.display = 'none'; currentSceneIndex = 0; inventory = []; musicaFundo.pause(); musicaFundo.currentTime = 0; }
        restartButton.onclick = restartAdventure;
        closeModalBtn.onclick = () => { wrongAnswerModal.style.display = 'none'; };
        wrongAnswerModal.onclick = (event) => { if (event.target === wrongAnswerModal) { wrongAnswerModal.style.display = 'none'; } };
        function getFullTextForScene(index) { const texts = [ "You are helping your grandfather clean the attic when you find an old wooden box. You open the box and see a mysterious map. It shows a path to the old 'Blackwood Manor', a house abandoned for over 100 years! At the bottom of the map, there's a message: 'To find my secret, follow my instructions carefully.' You decide to go on this adventure. What do you do first?", "You arrive at Blackwood Manor. It's big and spooky! The front door is locked. You need to find a key or another way to get in. Look around. There is a small gargoyle statue next to the door, a dirty doormat, and a loose brick on the wall. What's your command?", "You use the key and open the door. CREAK! Inside, the house is completely dark. You can't see anything. You feel a cold breeze. You need to find a light source. You feel something with your hands: a long rope hanging from the ceiling and a large wooden chest on the floor.", "You decide to open a door and enter a dusty library. On a table, you find a piece of paper with a riddle: 'I have cities, but no houses. I have mountains, but no trees. I have water, but no fish. What am I?'. The answer is the key to the next step. Where do you look for the answer?", "The map on the wall is covered in dust, making it hard to see the details. You need to clean it. Which command is best to **wipe away** the dust without damaging the old paper?", "You are very clever! You found the secret button behind the map. Now, what is your final command to reveal the manor's secret?" ]; return texts[index]; }
    </script>
</body>
</html>
